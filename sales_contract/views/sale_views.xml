<odoo>
	<data>
		<record id="view_order_form_inherit_fsm" model="ir.ui.view">
			<field name="name">sale.order.form.sale.fsm</field>
			<field name="model">sale.order</field>
			<field name="inherit_id" ref="sale.view_order_form"/>
			<field name="arch" type="xml">
				<field name="partner_id" position="after">
					<field name="active_contract" readonly="1" invisible="0"/>
				</field>
				<xpath expr="//field[@name='order_line']//tree//field[@name='product_id']" position="after">
					<field name="active_contract" invisible="1"/>
				</xpath>
				<xpath expr="//field[@name='order_line']//tree//field[@name='product_id']" position="attributes">
					<attribute name="domain">['|', ('contract_line_ids.contract_id','=', active_contract), ('generic', '=', True)]</attribute>
				</xpath>
			</field>
		</record>
	</data>
</odoo>